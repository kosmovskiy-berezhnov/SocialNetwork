<!doctype html>
<title>Social Network</title>
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<div class="container">
    <div class=menu>
        <ol>
            <li><a href="{{ url_for('notifications.mypage') }}"> My&nbsp;page</a></li>
            <li><a href="{{ url_for('community.mycommunities') }}"> Communities</a></li>
            <li><a href="{{ url_for('create_post.myposts') }}"> My&nbsp;posts</a></li>
        </ol>
    </div>
    <div class=page>
        <input type="text" name="search" placeholder="Search" size="100" id="findtext">
        <button class="like-button" id="cancelsearch"><i class="fa fa-times" aria-hidden="true"></i></button>
        <button class="like-button" type="submit" id="find">Search</button>
        {% if current_user.is_anonymous %}
        <a href="{{ url_for('authorization.login') }}">log in</a>
        <br>
        Sort<select name="sort">
        <option selected value="New">New</option>
        <option value="Popular">Popular</option>
        <option value="Top">Top</option>
    </select>
        <a href="{{ url_for('registration.register') }}">sign in</a>
        {% else %}
        <a href="{{ url_for('authorization.logout') }}">log out</a>
        <br>
        Sort<select name="sort">
        <option selected value="New">New</option>
        <option value="Popular">Popular</option>
        <option value="Top">Top</option>
    </select>
        <a> {{ current_user.username }} </a>
        {% endif %}
        {% for message in get_flashed_messages() %}
        <div class=flash>{{ message }}</div>
        {% endfor %}
    </div>
    <div class=interface>
        <div class="adminandmod">
            Moderator interface:
            <ol>
                <li><a href="{{ url_for('notifications.mypage') }}"> Ban&nbsp;user</a></li>
                <li><a href="{{ url_for('notifications.mypage') }}"> Delete&nbsp;user</a></li>
                <li><a href="{{ url_for('community.mycommunities') }}"> Delete&nbsp;community</a></li>
                <li><a href="{{ url_for('create_post.myposts') }}"> Appoint&nbsp;moderator</a></li>
            </ol>
        </div>
        <div class="adminandmod">
            Administrator interface:
            <ol>
                <li><a href="{{ url_for('notifications.mypage') }}"> Appoint&nbsp;administrator</a></li>
                <li><a href="{{ url_for('community.mycommunities') }}"> Send&nbsp;newsLetter</a></li>
            </ol>
        </div>
    </div>
    <div class="content">
        {% block body %}{% endblock %}
    </div>
</div>

<script type=text/javascript>

document.querySelector('#find').onclick = function() {
findinf = document.getElementById('findtext').value;
ob = document.getElementById('content')

for(var i=0; i<ob.children.length; i++){
    chtml=ob.children[i].textContent.toLowerCase();
    if(chtml.indexOf(findinf.toLowerCase()) == -1)
    {
        ob.children[i].style.display='none';
    }
}
};

document.querySelector('#cancelsearch').onclick = function() {
ob = document.getElementById('content')

for(var i=0; i<ob.children.length; i++){
    ob.children[i].style.display='block';
}
};


</script>
