{% extends "layout.html" %}
{% block body %}

<h1>{{ com.title }}</h1>
<a href="{{ url_for('community.addpost') }}">Add post to this community</a>
{% if is_subbed %}
<form action="{{ url_for('community.unsubscribecommunity') }}" method="post">
    <input type="hidden" name="id" value="{{ com.id }}"/>
    <button class=ghost-button type="submit">Unsubscribe</button>
</form>
{% endif %}
<div  id="content">
    {% for post in posts %}
    <article class="post">
        <header>
            <div>
                <h1>{{ post.title }}</h1>
                <div class="about">by {{ post.author}} on {{ post.creation_date.strftime('%Y-%m-%d') }}</div>
            </div>
        </header>
        <div id="post{{ post.id}}" class="body">
            {{ post.html_page| safe}}
        </div>
        <hr>
    </article>
    <form action="{{ url_for('userService.likepost') }}" method="post">
        <input type="hidden" name="postid" value="{{ post.id }}"/>
        <button class="like-button" type="submit"><i class="fa fa-heart-o" aria-hidden="true"></i></button>
    </form>

    <hr>
    <p>Comments</p>
    {% for comment in post.post_comments %}
    <p>{{comment.text}}</p>
    {% endfor %}
</div>
<form action="{{ url_for('userService.addcomment') }}" method="post">
    <input type="hidden" name="postid" value="{{ post.id }}"/>
    <input type="text" name="text">
    <button type="submit">Comment</button>
</form>
{% endfor %}
{% endblock %}